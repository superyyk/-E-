{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/yangyongkang/Documents/HBuilderProjects/洗车APP移动端/pages/order/order_detail/order_detail.vue?43f9","webpack:////Users/yangyongkang/Documents/HBuilderProjects/洗车APP移动端/pages/order/order_detail/order_detail.vue?2576","webpack:////Users/yangyongkang/Documents/HBuilderProjects/洗车APP移动端/pages/order/order_detail/order_detail.vue?a7ce","uni-app:///pages/order/order_detail/order_detail.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wH,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;;;AAG3D;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAy1B,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuE72B;AACA,c;AACA;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,mBAFA;AAGA,iBAHA;AAIA,oBAJA;;AAMA,GARA;AASA,QATA,oBASA;AACA;AACA,mBADA;;AAGA;AACA,GAdA;AAeA;AACA,YADA,oBACA,QADA,EACA,QADA,EACA;AACA;AACA;AACA;AACA;AACA,KANA,EAfA;;AAuBA,QAvBA,kBAuBA,CAvBA,EAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAvCA;AAwCA;AACA,aADA,qBACA,QADA,EACA,UADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA;AACA,KAXA;AAYA,eAZA,uBAYA,CAZA,EAYA;AACA;AACA;;AAEA;AACA;AACA,2BADA;AAEA,yBAFA;AAGA,0BAHA;;AAKA;AACA;;AAEA;AACA,OAZA,MAYA;AACA;AACA;AACA,KA7BA;AA8BA,UA9BA,kBA8BA,CA9BA,EA8BA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,qBAFA;AAGA,sBAHA;;AAKA;;AAEA,KAzCA;AA0CA,gBA1CA,wBA0CA,GA1CA,EA0CA;AACA;AACA,wBADA;;AAGA;AACA,4CADA;AAEA;AACA,kBADA;AAEA,oBAFA,EAFA;;AAMA,eANA,mBAMA,GANA,EAMA;AACA;AACA;AACA,0BADA;AAEA,0BAFA;;AAIA;AACA;AACA,sCADA;;AAGA,WAJA,EAIA,IAJA;;AAMA,SAlBA;;AAoBA,KAlEA;AAmEA,iBAnEA,2BAmEA;AACA;AACA,kGADA;;AAGA,KAvEA;AAwEA,UAxEA,oBAwEA;AACA;AACA,yGADA;;AAGA,KA5EA,EAxCA,E","file":"pages/order/order_detail/order_detail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/order_detail/order_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order_detail.vue?vue&type=template&id=1f6aa905&\"\nvar renderjs\nimport script from \"./order_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./order_detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/order_detail/order_detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_detail.vue?vue&type=template&id=1f6aa905&\"","var components\ntry {\n  components = {\n    uCountDown: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-count-down/u-count-down\" */ \"@/uview-ui/components/u-count-down/u-count-down.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.getImgsrc(\"cars/\" + _vm.order_info.img)\n  var m1 = _vm.toTime(_vm.order_info.fTime * 1000)\n  var m2 = _vm.toTime(_vm.order_info.fTime * 1000)\n\n  var f0 = _vm._f(\"money\")(_vm.order_info.old_price)\n\n  var f1 = _vm._f(\"money\")(_vm.order_info.price)\n\n  var f2 = _vm._f(\"money\")(\n    _vm.order_info.coupon != null ? _vm.order_info.coupon.fNum : 0\n  )\n\n  var f3 = _vm._f(\"money\")(\n    _vm.get_price(_vm.order_info.district, _vm.order_info)\n  )\n\n  var f4 = _vm._f(\"money\")(_vm.order_info.fPrice)\n\n  var m3 = _vm.get_order_status(_vm.order_info.status)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        f0: f0,\n        f1: f1,\n        f2: f2,\n        f3: f3,\n        f4: f4,\n        m3: m3\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"p-20\">\n\t\t\t<view class=\"u-f-dc u-f-ac u-f-ajc\">\n\t\t\t\t<image :src=\"getImgsrc(`cars/${order_info.img}`)\" mode=\"aspectFill\" style=\"width: 100px; height: 100px;\"></image>\n\t\t\t\t<text class=\"f-b-wb\">{{order_info.name}}</text>\n\t\t\t\t<text class=\"f-s m-t-10\">{{toTime(order_info.fTime*1000)}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">订单编号：</text>\n\t\t\t\t<text>{{order_info.fOrder_uid}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">下单时间：</text>\n\t\t\t\t<text>{{toTime(order_info.fTime*1000)}}</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">下单地址：</text>\n\t\t\t\t<text>{{order_info.fAddress1+order_info.fAddress2}}</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">车型：</text>\n\t\t\t\t<text>{{order_info.name}}</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">市场价：</text>\n\t\t\t\t<text>¥{{order_info.old_price |money}}元</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">平台价：</text>\n\t\t\t\t<text>¥{{order_info.price |money}}元</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">优惠券：</text>\n\t\t\t\t<text>-¥{{order_info.coupon!=null?order_info.coupon.fNum:0 |money}}元</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">区域优惠：</text>\n\t\t\t\t<text>-¥{{get_price(order_info.district,order_info) |money}}元</text>\n\t\t\t</view>\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">最终支付金额：</text>\n\t\t\t\t<text class=\"f-b-wb\" style=\"color: crimson;\">¥{{order_info.fPrice |money}}元</text>\n\t\t\t</view>\n\t\t\t<view class=\"u-f-dr u-f-ac u-f-jsb p-5 m-t-10\">\n\t\t\t\t<text class=\"c-grey\">订单状态：</text>\n\t\t\t\t<text class=\"text-border-line-green\" @click=\"to_pay_detail\">{{get_order_status(order_info.status) }}</text>\n\t\t\t</view>\n\t\t\t<view v-if=\"order_info.status==0 && order_info.fUser_uuid==user_uuid\" class=\"p-15 u-f-dc u-f-ac u-f-ajc m-t-10\">\n\t\t\t\t<!-- <u-button type=\"success\" text=\"去支付\" @click=\"to_pay\"></u-button> -->\n\t\t\t\t<view class=\"c-btn u-f-dc u-f-ac bd-r-10\" hover-class=\"bubble\" @click=\"to_pay()\" style=\"width: 80%;\">\n\t\t\t\t\t<text>去支付</text>\n\t\t\t\t\t<view v-if=\"out_show\" class=\"u-f-dr u-f-ac\" style=\"color: red;\">\n\t\t\t\t\t<text>超时：</text>\n\t\t\t\t\t<u-count-down :time=\"out_time\" format=\"HH:mm:ss:SSS\" autoStart millisecond @finish=\"finish\" @change=\"time_change()\"></u-count-down>\n\t\t\t\t    </view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\tvar _self\n\tvar count=0\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\torder_info:'',\n\t\t\t\tuser_uuid:'',\n\t\t\t\tout_time:0,\n\t\t\t\tout_show:true\n\t\t\t}\n\t\t},\n\t\tonShow() {\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle:'订单详情'\n\t\t})\t\n\t\tthis.user_uuid=this.checkLogin().user_uuid\n\t\t},\n\t\twatch:{\n\t\t\tout_time(newValue,oldValue){\n\t\t\t\tconsole.log(newValue);\n\t\t\t\tif(newValue==0){\n\t\t\t\t\tthis.out_show=false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonLoad(e) {\n\t\t\tthis.order_info=JSON.parse(e.item)\n\t\t\tif(this.order_info.status<1){ //只有待支付和待接单的订单\n\t\t\tconsole.log(this.order_info);\n\t\t\tlet now= new Date().getTime()\n\t\t\tconsole.log(now);\n\t\t\tconsole.log(this.order_info.fTime*1000);\n\t\t\tthis.out_time=Math.floor((now-this.order_info.fTime*1000)/1000) \n\t\t\t\n\t\t\tthis.out_time=29*60*1000-this.out_time*1000\n\t\t     console.log(this.out_time);\n\t\t\tif(this.out_time<0){\n\t\t\t  this.change_order(this.order_info.fOrder_uid)\n\t\t\t}\n\t\t\t}\n\t\n\t\t},\n\t\tmethods: {\n\t\t\tget_price(district,order_info){\n\t\t\t\tlet num=0\n\t\t\t\tif(order_info.youhui.length>0){\n\t\t\t\t\torder_info.youhui.filter((item)=>{\n\t\t\t\t\t\tif(item.area==district){\n\t\t\t\t\t\t\tnum=item.youhui\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn num\n\t\t\t},\n\t\t\ttime_change(e){\n\t\t\t\t//console.log(e);\n\t\t\t\tif(this.out_time>=0){\n\t\t\t\t\t\n\t\t\t\t\tif(this.out_time<60*1000 && count<2){\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle:'订单即将超时',\n\t\t\t\t\t\t\ticon:\"error\",\n\t\t\t\t\t\t\tduration:3000\n\t\t\t\t\t\t})\n\t\t\t\t\t\tcount++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.out_show=true\n\t\t\t\t}else{\n\t\t\t\t\tthis.out_show=false\n\t\t\t\t}\n\t\t\t},\n\t\t\tfinish(e){\n\t\t\t\tconsole.log(\"时间到\");\n\t\t\t\tconsole.log(e);\n\t\t\t\tthis.out_show=false\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'订单已超时',\n\t\t\t\t\ticon:\"error\",\n\t\t\t\t\tduration:3000\n\t\t\t\t})\n\t\t\t\tthis.change_order(this.order_info.fOrder_uid)\n\t\t\t\t\n\t\t\t},\n\t\t\tchange_order(uid){\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'处理订单...'\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl:this.tp_url+'c_change_status',\n\t\t\t\t\tdata:{\n\t\t\t\t\t\tuid:uid,\n\t\t\t\t\t\tstatus:11\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle:'订单已取消',\n\t\t\t\t\t\t\tduration:2000\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl:'../../index/index'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t},3000)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tto_pay_detail(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'../../index/pay/pay_result/pay_result?order_info='+JSON.stringify(this.order_info) \n\t\t\t\t})\n\t\t\t},\n\t\t\tto_pay(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'../../index/pay/pay?price='+this.order_info.fPrice+'&uid='+this.order_info.fOrder_uid\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}